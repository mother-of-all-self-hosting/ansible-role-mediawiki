{#
SPDX-FileCopyrightText: 2023 Slavi Pantaleev
SPDX-FileCopyrightText: 2023 - 2025 Meier Lukas
SPDX-FileCopyrightText: 2025 Suguru Hirahara

SPDX-License-Identifier: Apache-2.0
#}

{#
See: https://github.com/lldap/lldap/blob/main/docs/install.md#with-docker
#}

UID={{ lldap_uid }}
GID={{ lldap_gid }}

TZ={{ lldap_environment_variables_tz }}

LLDAP_VERBOSE={{ lldap_environment_variables_lldap_verbose | to_json }}

LLDAP_JWT_SECRET={{ lldap_environment_variables_lldap_jwt_secret }}
LLDAP_KEY_SEED={{ lldap_environment_variables_lldap_key_seed }}

LLDAP_LDAP_BASE_DN={{ lldap_environment_variables_lldap_ldap_base_dn }}

LLDAP_LDAP_USER_DN={{ lldap_environment_variables_lldap_ldap_user_dn }}
LLDAP_LDAP_USER_PASS={{ lldap_environment_variables_lldap_ldap_user_pass }}

{% if lldap_database_type == 'mysql' %}
LLDAP_DATABASE_URL=mysql://{{ lldap_database_mysql_username }}:{{ lldap_database_mysql_password }}@{{ lldap_database_mysql_hostname }}:{{ lldap_database_mysql_port }}/{{ lldap_database_name }}
{% endif %}

{% if lldap_database_type == 'postgres' %}
LLDAP_DATABASE_URL=postgres://{{ lldap_database_postgres_username }}:{{ lldap_database_postgres_password }}@{{ lldap_database_postgres_hostname }}:{{ lldap_database_postgres_port }}/{{ lldap_database_name }}
{% endif %}

{% if lldap_database_type == 'sqlite' %}
LLDAP_DATABASE_URL=sqlite:///{{ lldap_database_filename }}?mode=rwc
{% endif %}

{% if lldap_environment_variables_smtp_enabled %}
LLDAP_SMTP_OPTIONS__ENABLE_PASSWORD_RESET={{ lldap_environment_variables_smtp_enabled | to_json }}
LLDAP_SMTP_OPTIONS__SERVER={{ lldap_environment_variables_smtp_host }}
LLDAP_SMTP_OPTIONS__PORT={{ lldap_environment_variables_smtp_port }}
LLDAP_SMTP_OPTIONS__USER={{ lldap_environment_variables_smtp_user }}
LLDAP_SMTP_OPTIONS__PASSWORD={{ lldap_environment_variables_smtp_password }}
LLDAP_SMTP_OPTIONS__FROM={{ lldap_environment_variables_smtp_from }}

{% if lldap_environment_variables_smtp_to %}
LLDAP_SMTP_OPTIONS__TO={{ lldap_environment_variables_smtp_to }}
{% endif %}

LLDAP_SMTP_OPTIONS__SMTP_ENCRYPTION={{ lldap_environment_variables_smtp_encryption }}
{% endif %}

LLDAP_LDAPS_OPTIONS__ENABLED={{ lldap_environment_variables_lldap_ldaps_options__enabled | to_json }}

{% if lldap_environment_variables_lldap_ldaps_options__enabled %}
LLDAP_LDAPS_OPTIONS__CERT_FILE={{ lldap_environment_variables_lldap_ldaps_options__cert_file }}
LLDAP_LDAPS_OPTIONS__KEY_FILE={{ lldap_environment_variables_lldap_ldaps_options__key_file }}
{% endif %}

{{ lldap_environment_variables_additional_variables }}
