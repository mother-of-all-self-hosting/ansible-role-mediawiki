{#
SPDX-FileCopyrightText: 2023 Slavi Pantaleev
SPDX-FileCopyrightText: 2023 - 2025 Meier Lukas
SPDX-FileCopyrightText: 2025 Suguru Hirahara

SPDX-License-Identifier: Apache-2.0
#}

{#
See: https://github.com/mediawiki/mediawiki/blob/main/docs/install.md#with-docker
#}

UID={{ mediawiki_uid }}
GID={{ mediawiki_gid }}

TZ={{ mediawiki_environment_variables_tz }}

MediaWiki_VERBOSE={{ mediawiki_environment_variables_mediawiki_verbose | to_json }}

MediaWiki_JWT_SECRET={{ mediawiki_environment_variables_mediawiki_jwt_secret }}
MediaWiki_KEY_SEED={{ mediawiki_environment_variables_mediawiki_key_seed }}

MediaWiki_LDAP_BASE_DN={{ mediawiki_environment_variables_mediawiki_ldap_base_dn }}

MediaWiki_LDAP_USER_DN={{ mediawiki_environment_variables_mediawiki_ldap_user_dn }}
MediaWiki_LDAP_USER_PASS={{ mediawiki_environment_variables_mediawiki_ldap_user_pass }}

{% if mediawiki_database_type == 'mysql' %}
MediaWiki_DATABASE_URL=mysql://{{ mediawiki_database_mysql_username }}:{{ mediawiki_database_mysql_password }}@{{ mediawiki_database_mysql_hostname }}:{{ mediawiki_database_mysql_port }}/{{ mediawiki_database_name }}
{% endif %}

{% if mediawiki_database_type == 'postgres' %}
MediaWiki_DATABASE_URL=postgres://{{ mediawiki_database_postgres_username }}:{{ mediawiki_database_postgres_password }}@{{ mediawiki_database_postgres_hostname }}:{{ mediawiki_database_postgres_port }}/{{ mediawiki_database_name }}
{% endif %}

{% if mediawiki_database_type == 'sqlite' %}
MediaWiki_DATABASE_URL=sqlite:///{{ mediawiki_database_filename }}?mode=rwc
{% endif %}

{% if mediawiki_environment_variables_smtp_enabled %}
MediaWiki_SMTP_OPTIONS__ENABLE_PASSWORD_RESET={{ mediawiki_environment_variables_smtp_enabled | to_json }}
MediaWiki_SMTP_OPTIONS__SERVER={{ mediawiki_environment_variables_smtp_host }}
MediaWiki_SMTP_OPTIONS__PORT={{ mediawiki_environment_variables_smtp_port }}
MediaWiki_SMTP_OPTIONS__USER={{ mediawiki_environment_variables_smtp_user }}
MediaWiki_SMTP_OPTIONS__PASSWORD={{ mediawiki_environment_variables_smtp_password }}
MediaWiki_SMTP_OPTIONS__FROM={{ mediawiki_environment_variables_smtp_from }}

{% if mediawiki_environment_variables_smtp_to %}
MediaWiki_SMTP_OPTIONS__TO={{ mediawiki_environment_variables_smtp_to }}
{% endif %}

MediaWiki_SMTP_OPTIONS__SMTP_ENCRYPTION={{ mediawiki_environment_variables_smtp_encryption }}
{% endif %}

MediaWiki_LDAPS_OPTIONS__ENABLED={{ mediawiki_environment_variables_mediawiki_ldaps_options__enabled | to_json }}

{% if mediawiki_environment_variables_mediawiki_ldaps_options__enabled %}
MediaWiki_LDAPS_OPTIONS__CERT_FILE={{ mediawiki_environment_variables_mediawiki_ldaps_options__cert_file }}
MediaWiki_LDAPS_OPTIONS__KEY_FILE={{ mediawiki_environment_variables_mediawiki_ldaps_options__key_file }}
{% endif %}

{{ mediawiki_environment_variables_additional_variables }}
